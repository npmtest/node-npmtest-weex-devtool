<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-weex-devtool/node_modules/weex-devtool/frontend/inspector/sass_module.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-weex-devtool">npmtest-weex-devtool (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-weex-devtool/node_modules/weex-devtool/frontend/inspector/sass_module.js</span></h1>
    <h2>
        
        Statements: <span class="metric">2.21% <small>(14 / 634)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 222)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 102)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">5.71% <small>(14 / 245)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-weex-devtool/node_modules/weex-devtool/frontend/inspector/</a> &#187; sass_module.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247</td><td class="line-coverage"><span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">WebInspector.SASSSupport={}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.parseSCSS=<span class="fstat-no" title="function not covered" >function(url,content)</span></span>
{<span class="cstat-no" title="statement not covered" >var text=new WebInspector.Text(content);<span class="cstat-no" title="statement not covered" >v</span>ar document=new WebInspector.SASSSupport.ASTDocument(url,text);<span class="cstat-no" title="statement not covered" >r</span>eturn WebInspector.formatterWorkerPool.runTask("parseSCSS",{content:content}).then(onParsed);<span class="fstat-no" title="function not covered" >f</span>unction onParsed(event)</span>
{<span class="cstat-no" title="statement not covered" >if(!event)</span>
<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.AST(document,[]);<span class="cstat-no" title="statement not covered" >v</span>ar data=(event.data);<span class="cstat-no" title="statement not covered" >v</span>ar rules=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;data.length;++i){<span class="cstat-no" title="statement not covered" >var rulePayload=data[i];<span class="cstat-no" title="statement not covered" >v</span>ar selectors=rulePayload.selectors.map(createTextNode);<span class="cstat-no" title="statement not covered" >v</span>ar properties=rulePayload.properties.map(createProperty);<span class="cstat-no" title="statement not covered" >v</span>ar range=WebInspector.TextRange.fromObject(rulePayload.styleRange);<span class="cstat-no" title="statement not covered" >v</span>ar rule=new WebInspector.SASSSupport.Rule(document,selectors,range,properties);<span class="cstat-no" title="statement not covered" >r</span>ules.push(rule);}</span></span>
<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.AST(document,rules);}</span>
<span class="fstat-no" title="function not covered" >function createTextNode(payload)</span>
{<span class="cstat-no" title="statement not covered" >var range=WebInspector.TextRange.fromObject(payload);<span class="cstat-no" title="statement not covered" >v</span>ar value=text.extract(range);<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSSupport.TextNode(document,text.extract(range),range);}</span>
<span class="fstat-no" title="function not covered" >function createProperty(payload)</span>
{<span class="cstat-no" title="statement not covered" >var name=createTextNode(payload.name);<span class="cstat-no" title="statement not covered" >v</span>ar value=createTextNode(payload.value);<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSSupport.Property(document,name,value,WebInspector.TextRange.fromObject(payload.range),payload.disabled);}</span>}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.ASTDocument=<span class="fstat-no" title="function not covered" >function(url,text)</span></span>
{<span class="cstat-no" title="statement not covered" >this.url=url;<span class="cstat-no" title="statement not covered" >t</span>his.text=text;<span class="cstat-no" title="statement not covered" >t</span>his.edits=[];}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.ASTDocument.prototype={clone:<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.ASTDocument(this.url,this.text);}</span>,hasChanged:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return!!this.edits.length;}</span>,newText:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >this.edits.stableSort(sequentialOrder);<span class="cstat-no" title="statement not covered" >v</span>ar text=this.text;<span class="cstat-no" title="statement not covered" >f</span>or(var i=this.edits.length-1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >var range=this.edits[i].oldRange;<span class="cstat-no" title="statement not covered" >v</span>ar newText=this.edits[i].newText;<span class="cstat-no" title="statement not covered" >t</span>ext=new WebInspector.Text(text.replaceRange(range,newText));}</span></span>
<span class="cstat-no" title="statement not covered" >return text;<span class="fstat-no" title="function not covered" >f</span>unction sequentialOrder(edit1,edit2)</span>
{<span class="cstat-no" title="statement not covered" >var range1=edit1.oldRange.collapseToStart();<span class="cstat-no" title="statement not covered" >v</span>ar range2=edit2.oldRange.collapseToStart();<span class="cstat-no" title="statement not covered" >i</span>f(range1.equal(range2))</span>
<span class="cstat-no" title="statement not covered" >return 0;<span class="cstat-no" title="statement not covered" >r</span>eturn range1.follows(range2)?1:-1;}</span>},}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Node=<span class="fstat-no" title="function not covered" >function(document)</span></span>
{<span class="cstat-no" title="statement not covered" >this.document=document;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.TextNode=<span class="fstat-no" title="function not covered" >function(document,text,range)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Node.call(this,document);<span class="cstat-no" title="statement not covered" >t</span>his.text=text;<span class="cstat-no" title="statement not covered" >t</span>his.range=range;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.TextNode.prototype={setText:<span class="fstat-no" title="function not covered" >function(newText)</span></span>
{<span class="cstat-no" title="statement not covered" >if(this.text===newText)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span>his.text=newText;<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(new WebInspector.SourceEdit(this.document.url,this.range,newText));}</span>,clone:<span class="fstat-no" title="function not covered" >function(document)</span>
{<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.TextNode(document,this.text,this.range.clone());}</span>,match:<span class="fstat-no" title="function not covered" >function(other,outNodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >if(this.text.trim()!==other.text.trim())</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(outNodeMapping)</span>
<span class="cstat-no" title="statement not covered" >outNodeMapping.set(this,other);<span class="cstat-no" title="statement not covered" >r</span>eturn true;}</span>,__proto__:WebInspector.SASSSupport.Node.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Property=<span class="fstat-no" title="function not covered" >function(document,name,value,range,disabled)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Node.call(this,document);<span class="cstat-no" title="statement not covered" >t</span>his.name=name;<span class="cstat-no" title="statement not covered" >t</span>his.value=value;<span class="cstat-no" title="statement not covered" >t</span>his.range=range;<span class="cstat-no" title="statement not covered" >t</span>his.name.parent=this;<span class="cstat-no" title="statement not covered" >t</span>his.value.parent=this;<span class="cstat-no" title="statement not covered" >t</span>his.disabled=disabled;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Property.prototype={clone:<span class="fstat-no" title="function not covered" >function(document)</span></span>
{<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.Property(document,this.name.clone(document),this.value.clone(document),this.range.clone(),this.disabled);}</span>,visit:<span class="fstat-no" title="function not covered" >function(callback)</span>
{<span class="cstat-no" title="statement not covered" >callback(this);<span class="cstat-no" title="statement not covered" >c</span>allback(this.name);<span class="cstat-no" title="statement not covered" >c</span>allback(this.value);}</span>,match:<span class="fstat-no" title="function not covered" >function(other,outNodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >if(this.disabled!==other.disabled)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(outNodeMapping)</span>
<span class="cstat-no" title="statement not covered" >outNodeMapping.set(this,other);<span class="cstat-no" title="statement not covered" >r</span>eturn this.name.match(other.name,outNodeMapping)&amp;&amp;this.value.match(other.value,outNodeMapping);}</span>,setDisabled:<span class="fstat-no" title="function not covered" >function(disabled)</span>
{<span class="cstat-no" title="statement not covered" >if(this.disabled===disabled)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span>his.disabled=disabled;<span class="cstat-no" title="statement not covered" >i</span>f(disabled){<span class="cstat-no" title="statement not covered" >var oldRange1=WebInspector.TextRange.createFromLocation(this.range.startLine,this.range.startColumn);<span class="cstat-no" title="statement not covered" >v</span>ar edit1=new WebInspector.SourceEdit(this.document.url,oldRange1,"/* ");<span class="cstat-no" title="statement not covered" >v</span>ar oldRange2=WebInspector.TextRange.createFromLocation(this.range.endLine,this.range.endColumn);<span class="cstat-no" title="statement not covered" >v</span>ar edit2=new WebInspector.SourceEdit(this.document.url,oldRange2," */");<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(edit1,edit2);<span class="cstat-no" title="statement not covered" >r</span>eturn;}</span></span>
<span class="cstat-no" title="statement not covered" >var oldRange1=new WebInspector.TextRange(this.range.startLine,this.range.startColumn,this.range.startLine,this.name.range.startColumn);<span class="cstat-no" title="statement not covered" >v</span>ar edit1=new WebInspector.SourceEdit(this.document.url,oldRange1,"");<span class="cstat-no" title="statement not covered" >v</span>ar oldRange2=new WebInspector.TextRange(this.range.endLine,this.range.endColumn-2,this.range.endLine,this.range.endColumn);<span class="cstat-no" title="statement not covered" >v</span>ar edit2=new WebInspector.SourceEdit(this.document.url,oldRange2,"");<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(edit1,edit2);}</span>,remove:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >console.assert(this.parent);<span class="cstat-no" title="statement not covered" >v</span>ar rule=this.parent;<span class="cstat-no" title="statement not covered" >v</span>ar index=rule.properties.indexOf(this);<span class="cstat-no" title="statement not covered" >r</span>ule.properties.splice(index,1);<span class="cstat-no" title="statement not covered" >t</span>his.parent=null;<span class="cstat-no" title="statement not covered" >v</span>ar lineRange=new WebInspector.TextRange(this.range.startLine,0,this.range.endLine+1,0);<span class="cstat-no" title="statement not covered" >v</span>ar oldRange;<span class="cstat-no" title="statement not covered" >i</span>f(this.document.text.extract(lineRange).trim()===this.document.text.extract(this.range).trim())</span>
<span class="cstat-no" title="statement not covered" >oldRange=lineRange;e</span>lse
<span class="cstat-no" title="statement not covered" >oldRange=this.range;<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(new WebInspector.SourceEdit(this.document.url,oldRange,""));}</span>,__proto__:WebInspector.SASSSupport.Node.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Rule=<span class="fstat-no" title="function not covered" >function(document,selectors,styleRange,properties)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Node.call(this,document);<span class="cstat-no" title="statement not covered" >t</span>his.selectors=selectors;<span class="cstat-no" title="statement not covered" >t</span>his.properties=properties;<span class="cstat-no" title="statement not covered" >t</span>his.styleRange=styleRange;<span class="cstat-no" title="statement not covered" >v</span>ar blockStartRange=styleRange.collapseToStart();<span class="cstat-no" title="statement not covered" >b</span>lockStartRange.startColumn-=1;<span class="cstat-no" title="statement not covered" >t</span>his.blockStart=new WebInspector.SASSSupport.TextNode(document,this.document.text.extract(blockStartRange),blockStartRange);<span class="cstat-no" title="statement not covered" >t</span>his.blockStart.parent=this;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >this.properties[i].parent=this;<span class="cstat-no" title="statement not covered" >t</span>his._hasTrailingSemicolon=!this.properties.length||this.document.text.extract(this.properties.peekLast().range).endsWith(";");}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Rule.prototype={clone:<span class="fstat-no" title="function not covered" >function(document)</span></span>
{<span class="cstat-no" title="statement not covered" >var properties=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >properties.push(this.properties[i].clone(document));<span class="cstat-no" title="statement not covered" >v</span>ar selectors=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.selectors.length;++i)</span>
<span class="cstat-no" title="statement not covered" >selectors.push(this.selectors[i].clone(document));<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSSupport.Rule(document,selectors,this.styleRange.clone(),properties);}</span>,visit:<span class="fstat-no" title="function not covered" >function(callback)</span>
{<span class="cstat-no" title="statement not covered" >callback(this);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.selectors.length;++i)</span>
<span class="cstat-no" title="statement not covered" >callback(this.selectors[i]);<span class="cstat-no" title="statement not covered" >c</span>allback(this.blockStart);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >this.properties[i].visit(callback);}</span>,match:<span class="fstat-no" title="function not covered" >function(other,outNodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >if(this.selectors.length!==other.selectors.length)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(this.properties.length!==other.properties.length)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(outNodeMapping)</span>
<span class="cstat-no" title="statement not covered" >outNodeMapping.set(this,other);<span class="cstat-no" title="statement not covered" >v</span>ar result=this.blockStart.match(other.blockStart,outNodeMapping);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;result&amp;&amp;i&lt;this.selectors.length;++i)</span>
<span class="cstat-no" title="statement not covered" >result=result&amp;&amp;this.selectors[i].match(other.selectors[i],outNodeMapping);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;result&amp;&amp;i&lt;this.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >result=result&amp;&amp;this.properties[i].match(other.properties[i],outNodeMapping);<span class="cstat-no" title="statement not covered" >r</span>eturn result;}</span>,_addTrailingSemicolon:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >if(this._hasTrailingSemicolon||!this.properties)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span>his._hasTrailingSemicolon=true;<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(new WebInspector.SourceEdit(this.document.url,this.properties.peekLast().range.collapseToEnd(),";"))}</span>,insertProperties:<span class="fstat-no" title="function not covered" >function(anchorProperty,nameTexts,valueTexts,disabledStates)</span>
{<span class="cstat-no" title="statement not covered" >console.assert(nameTexts.length===valueTexts.length&amp;&amp;valueTexts.length===disabledStates.length,"Input array should be of the same size.");<span class="cstat-no" title="statement not covered" >t</span>his._addTrailingSemicolon();<span class="cstat-no" title="statement not covered" >v</span>ar newProperties=[];<span class="cstat-no" title="statement not covered" >v</span>ar index=anchorProperty?this.properties.indexOf(anchorProperty):-1;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;nameTexts.length;++i){<span class="cstat-no" title="statement not covered" >var nameText=nameTexts[i];<span class="cstat-no" title="statement not covered" >v</span>ar valueText=valueTexts[i];<span class="cstat-no" title="statement not covered" >v</span>ar disabled=disabledStates[i];<span class="cstat-no" title="statement not covered" >t</span>his.document.edits.push(this._insertPropertyEdit(anchorProperty,nameText,valueText,disabled));<span class="cstat-no" title="statement not covered" >v</span>ar name=new WebInspector.SASSSupport.TextNode(this.document,nameText,WebInspector.TextRange.createFromLocation(0,0));<span class="cstat-no" title="statement not covered" >v</span>ar value=new WebInspector.SASSSupport.TextNode(this.document,valueText,WebInspector.TextRange.createFromLocation(0,0));<span class="cstat-no" title="statement not covered" >v</span>ar newProperty=new WebInspector.SASSSupport.Property(this.document,name,value,WebInspector.TextRange.createFromLocation(0,0),disabled);<span class="cstat-no" title="statement not covered" >t</span>his.properties.splice(index+i+1,0,newProperty);<span class="cstat-no" title="statement not covered" >n</span>ewProperty.parent=this;<span class="cstat-no" title="statement not covered" >n</span>ewProperties.push(newProperty);}</span></span>
<span class="cstat-no" title="statement not covered" >return newProperties;}</span>,_insertPropertyEdit:<span class="fstat-no" title="function not covered" >function(anchorProperty,nameText,valueText,disabled)</span>
{<span class="cstat-no" title="statement not covered" >var anchorRange=anchorProperty?anchorProperty.range:this.blockStart.range;<span class="cstat-no" title="statement not covered" >v</span>ar indent=this._computePropertyIndent();<span class="cstat-no" title="statement not covered" >v</span>ar leftComment=disabled?"/* ":"";<span class="cstat-no" title="statement not covered" >v</span>ar rightComment=disabled?" */":"";<span class="cstat-no" title="statement not covered" >v</span>ar newText=String.sprintf("\n%s%s%s: %s;%s",indent,leftComment,nameText,valueText,rightComment);<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SourceEdit(this.document.url,anchorRange.collapseToEnd(),newText);}</span>,_computePropertyIndent:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >var indentProperty=this.properties.find(property=&gt;<span class="cstat-no" title="statement not covered" >!property.range.isEmpty())</span>;<span class="cstat-no" title="statement not covered" >v</span>ar result="";<span class="cstat-no" title="statement not covered" >i</span>f(indentProperty){<span class="cstat-no" title="statement not covered" >result=this.document.text.extract(new WebInspector.TextRange(indentProperty.range.startLine,0,indentProperty.range.startLine,indentProperty.range.startColumn));}</span>else{<span class="cstat-no" title="statement not covered" >var lineNumber=this.blockStart.range.startLine;<span class="cstat-no" title="statement not covered" >v</span>ar columnNumber=this.blockStart.range.startColumn;<span class="cstat-no" title="statement not covered" >v</span>ar baseLine=this.document.text.extract(new WebInspector.TextRange(lineNumber,0,lineNumber,columnNumber));<span class="cstat-no" title="statement not covered" >r</span>esult=WebInspector.TextUtils.lineIndent(baseLine)+WebInspector.moduleSetting("textEditorIndent").get();}</span></span>
<span class="cstat-no" title="statement not covered" >return result.isWhitespace()?result:"";}</span>,__proto__:WebInspector.SASSSupport.Node.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.AST=<span class="fstat-no" title="function not covered" >function(document,rules)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.Node.call(this,document);<span class="cstat-no" title="statement not covered" >t</span>his.rules=rules;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;rules.length;++i)</span>
<span class="cstat-no" title="statement not covered" >rules[i].parent=this;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.AST.prototype={clone:<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >var document=this.document.clone();<span class="cstat-no" title="statement not covered" >v</span>ar rules=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.rules.length;++i)</span>
<span class="cstat-no" title="statement not covered" >rules.push(this.rules[i].clone(document));<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSSupport.AST(document,rules);}</span>,match:<span class="fstat-no" title="function not covered" >function(other,outNodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >if(other.document.url!==this.document.url)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(other.rules.length!==this.rules.length)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(outNodeMapping)</span>
<span class="cstat-no" title="statement not covered" >outNodeMapping.set(this,other);<span class="cstat-no" title="statement not covered" >v</span>ar result=true;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;result&amp;&amp;i&lt;this.rules.length;++i)</span>
<span class="cstat-no" title="statement not covered" >result=result&amp;&amp;this.rules[i].match(other.rules[i],outNodeMapping);<span class="cstat-no" title="statement not covered" >r</span>eturn result;}</span>,visit:<span class="fstat-no" title="function not covered" >function(callback)</span>
{<span class="cstat-no" title="statement not covered" >callback(this);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.rules.length;++i)</span>
<span class="cstat-no" title="statement not covered" >this.rules[i].visit(callback);}</span>,findNodeForPosition:<span class="fstat-no" title="function not covered" >function(lineNumber,columnNumber)</span>
{<span class="cstat-no" title="statement not covered" >this._ensureNodePositionsIndex();<span class="cstat-no" title="statement not covered" >v</span>ar index=this._sortedTextNodes.lowerBound({lineNumber:lineNumber,columnNumber:columnNumber},nodeComparator);<span class="cstat-no" title="statement not covered" >v</span>ar node=this._sortedTextNodes[index];<span class="cstat-no" title="statement not covered" >i</span>f(!node)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >r</span>eturn node.range.containsLocation(lineNumber,columnNumber)?node:null;<span class="fstat-no" title="function not covered" >f</span>unction nodeComparator(position,textNode)</span>
{<span class="cstat-no" title="statement not covered" >return textNode.range.compareToPosition(position.lineNumber,position.columnNumber);}</span>},_ensureNodePositionsIndex:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >if(this._sortedTextNodes)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span>his._sortedTextNodes=[];<span class="cstat-no" title="statement not covered" >t</span>his.visit(onNode.bind(this));<span class="cstat-no" title="statement not covered" >t</span>his._sortedTextNodes.sort(nodeComparator);<span class="fstat-no" title="function not covered" >f</span>unction onNode(node)</span>
{<span class="cstat-no" title="statement not covered" >if(!(node instanceof WebInspector.SASSSupport.TextNode))</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span>his._sortedTextNodes.push(node);}</span>
<span class="fstat-no" title="function not covered" >function nodeComparator(text1,text2)</span>
{<span class="cstat-no" title="statement not covered" >return WebInspector.TextRange.comparator(text1.range,text2.range);}</span>},__proto__:WebInspector.SASSSupport.Node.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.PropertyChangeType={PropertyAdded:"PropertyAdded",PropertyRemoved:"PropertyRemoved",PropertyToggled:"PropertyToggled",ValueChanged:"ValueChanged",NameChanged:"NameChanged"}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.PropertyChange=<span class="fstat-no" title="function not covered" >function(type,oldRule,newRule,oldPropertyIndex,newPropertyIndex)</span></span>
{<span class="cstat-no" title="statement not covered" >this.type=type;<span class="cstat-no" title="statement not covered" >t</span>his.oldRule=oldRule;<span class="cstat-no" title="statement not covered" >t</span>his.newRule=newRule;<span class="cstat-no" title="statement not covered" >t</span>his.oldPropertyIndex=oldPropertyIndex;<span class="cstat-no" title="statement not covered" >t</span>his.newPropertyIndex=newPropertyIndex;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.PropertyChange.prototype={oldProperty:<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >return this.oldRule.properties[this.oldPropertyIndex]||null;}</span>,newProperty:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return this.newRule.properties[this.newPropertyIndex]||null;}</span>}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.ASTDiff=<span class="fstat-no" title="function not covered" >function(url,oldAST,newAST,mapping,changes)</span></span>
{<span class="cstat-no" title="statement not covered" >this.url=url;<span class="cstat-no" title="statement not covered" >t</span>his.mapping=mapping;<span class="cstat-no" title="statement not covered" >t</span>his.changes=changes;<span class="cstat-no" title="statement not covered" >t</span>his.oldAST=oldAST;<span class="cstat-no" title="statement not covered" >t</span>his.newAST=newAST;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSupport.diffModels=<span class="fstat-no" title="function not covered" >function(oldAST,newAST)</span></span>
{<span class="cstat-no" title="statement not covered" >console.assert(oldAST.rules.length===newAST.rules.length,"Not implemented for rule diff.");<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(oldAST.document.url===newAST.document.url,"Diff makes sense for models with the same url.");<span class="cstat-no" title="statement not covered" >v</span>ar T=WebInspector.SASSSupport.PropertyChangeType;<span class="cstat-no" title="statement not covered" >v</span>ar changes=[];<span class="cstat-no" title="statement not covered" >v</span>ar mapping=new Map();<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;oldAST.rules.length;++i){<span class="cstat-no" title="statement not covered" >var oldRule=oldAST.rules[i];<span class="cstat-no" title="statement not covered" >v</span>ar newRule=newAST.rules[i];<span class="cstat-no" title="statement not covered" >c</span>omputeRuleDiff(mapping,oldRule,newRule);}</span></span>
<span class="cstat-no" title="statement not covered" >return new WebInspector.SASSSupport.ASTDiff(oldAST.document.url,oldAST,newAST,mapping,changes);<span class="fstat-no" title="function not covered" >f</span>unction addChange(type,oldRule,newRule,oldPropertyIndex,newPropertyIndex)</span>
{<span class="cstat-no" title="statement not covered" >changes.push(new WebInspector.SASSSupport.PropertyChange(type,oldRule,newRule,oldPropertyIndex,newPropertyIndex));}</span>
<span class="fstat-no" title="function not covered" >function computeRuleDiff(mapping,oldRule,newRule)</span>
{<span class="cstat-no" title="statement not covered" >var oldLines=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;oldRule.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >oldLines.push(oldRule.properties[i].name.text.trim()+":"+oldRule.properties[i].value.text.trim());<span class="cstat-no" title="statement not covered" >v</span>ar newLines=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;newRule.properties.length;++i)</span>
<span class="cstat-no" title="statement not covered" >newLines.push(newRule.properties[i].name.text.trim()+":"+newRule.properties[i].value.text.trim());<span class="cstat-no" title="statement not covered" >v</span>ar diff=WebInspector.Diff.lineDiff(oldLines,newLines);<span class="cstat-no" title="statement not covered" >d</span>iff=WebInspector.Diff.convertToEditDiff(diff);<span class="cstat-no" title="statement not covered" >v</span>ar p1=0,p2=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;diff.length;++i){<span class="cstat-no" title="statement not covered" >var token=diff[i];<span class="cstat-no" title="statement not covered" >i</span>f(token[0]===WebInspector.Diff.Operation.Delete){<span class="cstat-no" title="statement not covered" >for(var j=0;j&lt;token[1];++j)</span></span></span>
<span class="cstat-no" title="statement not covered" >addChange(T.PropertyRemoved,oldRule,newRule,p1++,p2);}</span>else <span class="cstat-no" title="statement not covered" >if(token[0]===WebInspector.Diff.Operation.Insert){<span class="cstat-no" title="statement not covered" >for(var j=0;j&lt;token[1];++j)</span></span>
<span class="cstat-no" title="statement not covered" >addChange(T.PropertyAdded,oldRule,newRule,p1,p2++);}</span>else{<span class="cstat-no" title="statement not covered" >for(var j=0;j&lt;token[1];++j)</span>
<span class="cstat-no" title="statement not covered" >computePropertyDiff(mapping,oldRule,newRule,p1++,p2++);}</span>}}
<span class="fstat-no" title="function not covered" >function computePropertyDiff(mapping,oldRule,newRule,oldPropertyIndex,newPropertyIndex)</span>
{<span class="cstat-no" title="statement not covered" >var oldProperty=oldRule.properties[oldPropertyIndex];<span class="cstat-no" title="statement not covered" >v</span>ar newProperty=newRule.properties[newPropertyIndex];<span class="cstat-no" title="statement not covered" >m</span>apping.set(oldProperty.name,newProperty.name);<span class="cstat-no" title="statement not covered" >m</span>apping.set(oldProperty.value,newProperty.value);<span class="cstat-no" title="statement not covered" >i</span>f(oldProperty.name.text.trim()!==newProperty.name.text.trim())</span>
<span class="cstat-no" title="statement not covered" >addChange(T.NameChanged,oldRule,newRule,oldPropertyIndex,newPropertyIndex);<span class="cstat-no" title="statement not covered" >i</span>f(oldProperty.value.text.trim()!==newProperty.value.text.trim())</span>
<span class="cstat-no" title="statement not covered" >addChange(T.ValueChanged,oldRule,newRule,oldPropertyIndex,newPropertyIndex);<span class="cstat-no" title="statement not covered" >i</span>f(oldProperty.disabled!==newProperty.disabled)</span>
<span class="cstat-no" title="statement not covered" >addChange(T.PropertyToggled,oldRule,newRule,oldPropertyIndex,newPropertyIndex);}</span>};<span class="cstat-no" title="statement not covered" >WebInspector.ASTService=<span class="fstat-no" title="function not covered" >function()</span></span>
{}
<span class="cstat-no" title="statement not covered" >WebInspector.ASTService.prototype={parseCSS:<span class="fstat-no" title="function not covered" >function(url,text)</span></span>
{<span class="cstat-no" title="statement not covered" >return WebInspector.SASSSupport.parseSCSS(url,text);}</span>,parseSCSS:<span class="fstat-no" title="function not covered" >function(url,text)</span>
{<span class="cstat-no" title="statement not covered" >return WebInspector.SASSSupport.parseSCSS(url,text);}</span>,};<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor=<span class="fstat-no" title="function not covered" >function(astService,map,editOperations)</span></span>
{<span class="cstat-no" title="statement not covered" >this._astService=astService;<span class="cstat-no" title="statement not covered" >t</span>his._map=map;<span class="cstat-no" title="statement not covered" >t</span>his._editOperations=editOperations;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.prototype={_mutate:<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >var changedCSSRules=new Set();<span class="cstat-no" title="statement not covered" >f</span>or(var editOperation of this._editOperations){<span class="cstat-no" title="statement not covered" >var rules=editOperation.perform();<span class="cstat-no" title="statement not covered" >c</span>hangedCSSRules.addAll(rules);}</span></span>
<span class="cstat-no" title="statement not covered" >var promises=[];<span class="cstat-no" title="statement not covered" >f</span>or(var ast of this._map.models().values()){<span class="cstat-no" title="statement not covered" >if(!ast.document.hasChanged())</span></span>
<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >v</span>ar promise;<span class="cstat-no" title="statement not covered" >i</span>f(ast.document.url===this._map.compiledURL())</span>
<span class="cstat-no" title="statement not covered" >promise=this._astService.parseCSS(ast.document.url,ast.document.newText().value());e</span>lse
<span class="cstat-no" title="statement not covered" >promise=this._astService.parseSCSS(ast.document.url,ast.document.newText().value());<span class="cstat-no" title="statement not covered" >p</span>romises.push(promise);}</span>
<span class="cstat-no" title="statement not covered" >return Promise.all(promises).then(this._onFinished.bind(this,changedCSSRules));}</span>,_onFinished:<span class="fstat-no" title="function not covered" >function(changedCSSRules,changedModels)</span>
{<span class="cstat-no" title="statement not covered" >var nodeMapping=new Map();<span class="cstat-no" title="statement not covered" >v</span>ar map=this._map.rebase(changedModels,nodeMapping);<span class="cstat-no" title="statement not covered" >i</span>f(!map)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >v</span>ar cssEdits=[];<span class="cstat-no" title="statement not covered" >f</span>or(var rule of changedCSSRules){<span class="cstat-no" title="statement not covered" >var oldRange=rule.styleRange;<span class="cstat-no" title="statement not covered" >v</span>ar newRule=nodeMapping.get(rule);<span class="cstat-no" title="statement not covered" >v</span>ar newText=newRule.document.text.extract(newRule.styleRange);<span class="cstat-no" title="statement not covered" >c</span>ssEdits.push(new WebInspector.SourceEdit(newRule.document.url,oldRange,newText));}</span></span>
<span class="cstat-no" title="statement not covered" >var newSASSSources=new Map();<span class="cstat-no" title="statement not covered" >f</span>or(var model of changedModels){<span class="cstat-no" title="statement not covered" >if(model.document.url===map.compiledURL())</span></span>
<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >n</span>ewSASSSources.set(model.document.url,model.document.text.value());}</span>
<span class="cstat-no" title="statement not covered" >return new WebInspector.SourceMap.EditResult(map,cssEdits,newSASSSources);}</span>}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor._toSASSProperty=<span class="fstat-no" title="function not covered" >function(map,cssProperty)</span></span>
{<span class="cstat-no" title="statement not covered" >var sassName=map.toSourceNode(cssProperty.name);<span class="cstat-no" title="statement not covered" >r</span>eturn sassName?sassName.parent:null;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor._toCSSProperties=<span class="fstat-no" title="function not covered" >function(map,sassProperty)</span></span>
{<span class="cstat-no" title="statement not covered" >return map.toCompiledNodes(sassProperty.name).map(name=&gt;<span class="cstat-no" title="statement not covered" >name.parent)</span>;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.processCSSEdits=<span class="fstat-no" title="function not covered" >function(astService,map,ranges,newTexts)</span></span>
{<span class="cstat-no" title="statement not covered" >console.assert(ranges.length===newTexts.length);<span class="cstat-no" title="statement not covered" >v</span>ar cssURL=map.compiledURL();<span class="cstat-no" title="statement not covered" >v</span>ar cssText=map.compiledModel().document.text;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;ranges.length;++i)</span>
<span class="cstat-no" title="statement not covered" >cssText=new WebInspector.Text(cssText.replaceRange(ranges[i],newTexts[i]));<span class="cstat-no" title="statement not covered" >r</span>eturn astService.parseCSS(cssURL,cssText.value()).then(onCSSParsed);<span class="fstat-no" title="function not covered" >f</span>unction onCSSParsed(newCSSAST)</span>
{<span class="cstat-no" title="statement not covered" >if(newCSSAST.rules.length!==map.compiledModel().rules.length)</span>
<span class="cstat-no" title="statement not covered" >return Promise.resolve((null));<span class="cstat-no" title="statement not covered" >v</span>ar cssDiff=WebInspector.SASSSupport.diffModels(map.compiledModel(),newCSSAST);<span class="cstat-no" title="statement not covered" >v</span>ar edits=WebInspector.SASSProcessor._editsFromCSSDiff(cssDiff,map);<span class="cstat-no" title="statement not covered" >v</span>ar changedURLs=new Set(edits.map(edit=&gt;<span class="cstat-no" title="statement not covered" >edit.sassURL)</span>);<span class="cstat-no" title="statement not covered" >c</span>hangedURLs.add(map.compiledURL());<span class="cstat-no" title="statement not covered" >v</span>ar clonedModels=[];<span class="cstat-no" title="statement not covered" >f</span>or(var url of changedURLs)</span>
<span class="cstat-no" title="statement not covered" >clonedModels.push(map.modelForURL(url).clone());<span class="cstat-no" title="statement not covered" >v</span>ar nodeMapping=new Map();<span class="cstat-no" title="statement not covered" >v</span>ar rebasedMap=(map.rebase(clonedModels,nodeMapping));<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(rebasedMap);<span class="cstat-no" title="statement not covered" >v</span>ar rebasedEdits=edits.map(edit=&gt;<span class="cstat-no" title="statement not covered" >edit.rebase(rebasedMap,nodeMapping))</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor(astService,rebasedMap,rebasedEdits)._mutate();}</span>}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor._editsFromCSSDiff=<span class="fstat-no" title="function not covered" >function(cssDiff,map)</span></span>
{<span class="cstat-no" title="statement not covered" >var T=WebInspector.SASSSupport.PropertyChangeType;<span class="cstat-no" title="statement not covered" >v</span>ar operations=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;cssDiff.changes.length;++i){<span class="cstat-no" title="statement not covered" >var change=cssDiff.changes[i];<span class="cstat-no" title="statement not covered" >v</span>ar operation=null;<span class="cstat-no" title="statement not covered" >i</span>f(change.type===T.ValueChanged||change.type===T.NameChanged)</span></span>
<span class="cstat-no" title="statement not covered" >operation=WebInspector.SASSProcessor.SetTextOperation.fromCSSChange(change,map);e</span>lse <span class="cstat-no" title="statement not covered" >if(change.type===T.PropertyToggled)</span>
<span class="cstat-no" title="statement not covered" >operation=WebInspector.SASSProcessor.TogglePropertyOperation.fromCSSChange(change,map);e</span>lse <span class="cstat-no" title="statement not covered" >if(change.type===T.PropertyRemoved)</span>
<span class="cstat-no" title="statement not covered" >operation=WebInspector.SASSProcessor.RemovePropertyOperation.fromCSSChange(change,map);e</span>lse <span class="cstat-no" title="statement not covered" >if(change.type===T.PropertyAdded)</span>
<span class="cstat-no" title="statement not covered" >operation=WebInspector.SASSProcessor.InsertPropertiesOperation.fromCSSChange(change,map);<span class="cstat-no" title="statement not covered" >i</span>f(!operation){<span class="cstat-no" title="statement not covered" >WebInspector.console.error("Operation ignored: "+change.type);<span class="cstat-no" title="statement not covered" >c</span>ontinue;}</span></span>
<span class="cstat-no" title="statement not covered" >var merged=false;<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;!merged&amp;&amp;j&lt;operations.length;++j)</span>
<span class="cstat-no" title="statement not covered" >merged=operations[j].merge(operation);<span class="cstat-no" title="statement not covered" >i</span>f(!merged)</span>
<span class="cstat-no" title="statement not covered" >operations.push(operation);}</span>
<span class="cstat-no" title="statement not covered" >return operations;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.EditOperation=<span class="fstat-no" title="function not covered" >function(map,sassURL)</span></span>
{<span class="cstat-no" title="statement not covered" >this.map=map;<span class="cstat-no" title="statement not covered" >t</span>his.sassURL=sassURL;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.EditOperation.prototype={merge:<span class="fstat-no" title="function not covered" >function(other)</span></span>
{<span class="cstat-no" title="statement not covered" >return false;}</span>,perform:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return[];}</span>,rebase:<span class="fstat-no" title="function not covered" >function(newMap,nodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >return this;}</span>,}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.SetTextOperation=<span class="fstat-no" title="function not covered" >function(map,sassNode,newText)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.EditOperation.call(this,map,sassNode.document.url);<span class="cstat-no" title="statement not covered" >t</span>his._sassNode=sassNode;<span class="cstat-no" title="statement not covered" >t</span>his._newText=newText;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.SetTextOperation.fromCSSChange=<span class="fstat-no" title="function not covered" >function(change,map)</span></span>
{<span class="cstat-no" title="statement not covered" >var oldProperty=(change.oldProperty());<span class="cstat-no" title="statement not covered" >v</span>ar newProperty=(change.newProperty());<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(oldProperty&amp;&amp;newProperty,"SetTextOperation must have both oldProperty and newProperty");<span class="cstat-no" title="statement not covered" >v</span>ar newValue=null;<span class="cstat-no" title="statement not covered" >v</span>ar sassNode=null;<span class="cstat-no" title="statement not covered" >i</span>f(change.type===WebInspector.SASSSupport.PropertyChangeType.NameChanged){<span class="cstat-no" title="statement not covered" >newValue=newProperty.name.text;<span class="cstat-no" title="statement not covered" >s</span>assNode=map.toSourceNode(oldProperty.name);}</span>else{<span class="cstat-no" title="statement not covered" >newValue=newProperty.value.text;<span class="cstat-no" title="statement not covered" >s</span>assNode=map.toSourceNode(oldProperty.value);}</span></span>
<span class="cstat-no" title="statement not covered" >if(!sassNode)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.SetTextOperation(map,sassNode,newValue);}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.SetTextOperation.prototype={merge:<span class="fstat-no" title="function not covered" >function(other)</span></span>
{<span class="cstat-no" title="statement not covered" >if(!(other instanceof WebInspector.SASSProcessor.SetTextOperation))</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >r</span>eturn this._sassNode===other._sassNode;}</span>,perform:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >this._sassNode.setText(this._newText);<span class="cstat-no" title="statement not covered" >v</span>ar nodes=this.map.toCompiledNodes(this._sassNode);<span class="cstat-no" title="statement not covered" >f</span>or(var node of nodes)</span>
<span class="cstat-no" title="statement not covered" >node.setText(this._newText);<span class="cstat-no" title="statement not covered" >v</span>ar cssRules=nodes.map(textNode=&gt;<span class="cstat-no" title="statement not covered" >textNode.parent.parent)</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn cssRules;}</span>,rebase:<span class="fstat-no" title="function not covered" >function(newMap,nodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >var sassNode=(nodeMapping.get(this._sassNode))||this._sassNode;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.SetTextOperation(newMap,sassNode,this._newText);}</span>,__proto__:WebInspector.SASSProcessor.EditOperation.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.TogglePropertyOperation=<span class="fstat-no" title="function not covered" >function(map,sassProperty,newDisabled)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.EditOperation.call(this,map,sassProperty.document.url);<span class="cstat-no" title="statement not covered" >t</span>his._sassProperty=sassProperty;<span class="cstat-no" title="statement not covered" >t</span>his._newDisabled=newDisabled;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.TogglePropertyOperation.fromCSSChange=<span class="fstat-no" title="function not covered" >function(change,map)</span></span>
{<span class="cstat-no" title="statement not covered" >var oldCSSProperty=(change.oldProperty());<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(oldCSSProperty,"TogglePropertyOperation must have old CSS property");<span class="cstat-no" title="statement not covered" >v</span>ar sassProperty=WebInspector.SASSProcessor._toSASSProperty(map,oldCSSProperty);<span class="cstat-no" title="statement not covered" >i</span>f(!sassProperty)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >v</span>ar newDisabled=change.newProperty().disabled;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.TogglePropertyOperation(map,sassProperty,newDisabled);}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.TogglePropertyOperation.prototype={merge:<span class="fstat-no" title="function not covered" >function(other)</span></span>
{<span class="cstat-no" title="statement not covered" >if(!(other instanceof WebInspector.SASSProcessor.TogglePropertyOperation))</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >r</span>eturn this._sassProperty===other._sassProperty;}</span>,perform:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >this._sassProperty.setDisabled(this._newDisabled);<span class="cstat-no" title="statement not covered" >v</span>ar cssProperties=WebInspector.SASSProcessor._toCSSProperties(this.map,this._sassProperty);<span class="cstat-no" title="statement not covered" >f</span>or(var property of cssProperties)</span>
<span class="cstat-no" title="statement not covered" >property.setDisabled(this._newDisabled);<span class="cstat-no" title="statement not covered" >v</span>ar cssRules=cssProperties.map(property=&gt;<span class="cstat-no" title="statement not covered" >property.parent)</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn cssRules;}</span>,rebase:<span class="fstat-no" title="function not covered" >function(newMap,nodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >var sassProperty=(nodeMapping.get(this._sassProperty))||this._sassProperty;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.TogglePropertyOperation(newMap,sassProperty,this._newDisabled);}</span>,__proto__:WebInspector.SASSProcessor.EditOperation.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.RemovePropertyOperation=<span class="fstat-no" title="function not covered" >function(map,sassProperty)</span></span>
{<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.EditOperation.call(this,map,sassProperty.document.url);<span class="cstat-no" title="statement not covered" >t</span>his._sassProperty=sassProperty;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.RemovePropertyOperation.fromCSSChange=<span class="fstat-no" title="function not covered" >function(change,map)</span></span>
{<span class="cstat-no" title="statement not covered" >var removedProperty=(change.oldProperty());<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(removedProperty,"RemovePropertyOperation must have removed CSS property");<span class="cstat-no" title="statement not covered" >v</span>ar sassProperty=WebInspector.SASSProcessor._toSASSProperty(map,removedProperty);<span class="cstat-no" title="statement not covered" >i</span>f(!sassProperty)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.RemovePropertyOperation(map,sassProperty);}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.RemovePropertyOperation.prototype={merge:<span class="fstat-no" title="function not covered" >function(other)</span></span>
{<span class="cstat-no" title="statement not covered" >if(!(other instanceof WebInspector.SASSProcessor.RemovePropertyOperation))</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >r</span>eturn this._sassProperty===other._sassProperty;}</span>,perform:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >var cssProperties=WebInspector.SASSProcessor._toCSSProperties(this.map,this._sassProperty);<span class="cstat-no" title="statement not covered" >v</span>ar cssRules=cssProperties.map(property=&gt;<span class="cstat-no" title="statement not covered" >property.parent)</span>;<span class="cstat-no" title="statement not covered" >t</span>his._sassProperty.remove();<span class="cstat-no" title="statement not covered" >f</span>or(var cssProperty of cssProperties){<span class="cstat-no" title="statement not covered" >cssProperty.remove();<span class="cstat-no" title="statement not covered" >t</span>his.map.removeMapping(cssProperty.name,this._sassProperty.name);<span class="cstat-no" title="statement not covered" >t</span>his.map.removeMapping(cssProperty.value,this._sassProperty.value);}</span></span>
<span class="cstat-no" title="statement not covered" >return cssRules;}</span>,rebase:<span class="fstat-no" title="function not covered" >function(newMap,nodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >var sassProperty=(nodeMapping.get(this._sassProperty))||this._sassProperty;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.RemovePropertyOperation(newMap,sassProperty);}</span>,__proto__:WebInspector.SASSProcessor.EditOperation.prototype}
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.InsertPropertiesOperation=<span class="fstat-no" title="function not covered" >function(map,sassRule,afterSASSProperty,propertyNames,propertyValues,disabledStates)</span></span>
{<span class="cstat-no" title="statement not covered" >console.assert(propertyNames.length===propertyValues.length&amp;&amp;propertyValues.length===disabledStates.length);<span class="cstat-no" title="statement not covered" >W</span>ebInspector.SASSProcessor.EditOperation.call(this,map,sassRule.document.url);<span class="cstat-no" title="statement not covered" >t</span>his._sassRule=sassRule;<span class="cstat-no" title="statement not covered" >t</span>his._afterSASSProperty=afterSASSProperty</span>
<span class="cstat-no" title="statement not covered" >this._nameTexts=propertyNames;<span class="cstat-no" title="statement not covered" >t</span>his._valueTexts=propertyValues;<span class="cstat-no" title="statement not covered" >t</span>his._disabledStates=disabledStates;}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.InsertPropertiesOperation.fromCSSChange=<span class="fstat-no" title="function not covered" >function(change,map)</span></span>
{<span class="cstat-no" title="statement not covered" >var sassRule=null;<span class="cstat-no" title="statement not covered" >v</span>ar afterSASSProperty=null;<span class="cstat-no" title="statement not covered" >i</span>f(change.oldPropertyIndex){<span class="cstat-no" title="statement not covered" >var cssAnchor=change.oldRule.properties[change.oldPropertyIndex-1].name;<span class="cstat-no" title="statement not covered" >v</span>ar sassAnchor=map.toSourceNode(cssAnchor);<span class="cstat-no" title="statement not covered" >a</span>fterSASSProperty=sassAnchor?sassAnchor.parent:null;<span class="cstat-no" title="statement not covered" >s</span>assRule=afterSASSProperty?afterSASSProperty.parent:null;}</span>else{<span class="cstat-no" title="statement not covered" >var cssAnchor=change.oldRule.blockStart;<span class="cstat-no" title="statement not covered" >v</span>ar sassAnchor=map.toSourceNode(cssAnchor);<span class="cstat-no" title="statement not covered" >s</span>assRule=sassAnchor?sassAnchor.parent:null;}</span></span>
<span class="cstat-no" title="statement not covered" >if(!sassRule)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >v</span>ar insertedProperty=(change.newProperty());<span class="cstat-no" title="statement not covered" >c</span>onsole.assert(insertedProperty,"InsertPropertiesOperation must have inserted CSS property");<span class="cstat-no" title="statement not covered" >v</span>ar names=[insertedProperty.name.text];<span class="cstat-no" title="statement not covered" >v</span>ar values=[insertedProperty.value.text];<span class="cstat-no" title="statement not covered" >v</span>ar disabledStates=[insertedProperty.disabled];<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.InsertPropertiesOperation(map,sassRule,afterSASSProperty,names,values,disabledStates);}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSProcessor.InsertPropertiesOperation.prototype={merge:<span class="fstat-no" title="function not covered" >function(other)</span></span>
{<span class="cstat-no" title="statement not covered" >if(!(other instanceof WebInspector.SASSProcessor.InsertPropertiesOperation))</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span>f(this._sassRule!==other._sassRule||this._afterSASSProperty!==other._afterSASSProperty)</span>
<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >v</span>ar names=new Set(this._nameTexts);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;other._nameTexts.length;++i){<span class="cstat-no" title="statement not covered" >var nameText=other._nameTexts[i];<span class="cstat-no" title="statement not covered" >i</span>f(names.has(nameText))</span></span>
<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >t</span>his._nameTexts.push(nameText);<span class="cstat-no" title="statement not covered" >t</span>his._valueTexts.push(other._valueTexts[i]);<span class="cstat-no" title="statement not covered" >t</span>his._disabledStates.push(other._disabledStates[i]);}</span>
<span class="cstat-no" title="statement not covered" >return true;}</span>,perform:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >var newSASSProperties=this._sassRule.insertProperties(this._afterSASSProperty,this._nameTexts,this._valueTexts,this._disabledStates);<span class="cstat-no" title="statement not covered" >v</span>ar cssRules=[];<span class="cstat-no" title="statement not covered" >v</span>ar afterCSSProperties=[];<span class="cstat-no" title="statement not covered" >i</span>f(this._afterSASSProperty){<span class="cstat-no" title="statement not covered" >afterCSSProperties=WebInspector.SASSProcessor._toCSSProperties(this.map,this._afterSASSProperty);<span class="cstat-no" title="statement not covered" >c</span>ssRules=afterCSSProperties.map(property=&gt;<span class="cstat-no" title="statement not covered" >property.parent)</span>;}</span>else{<span class="cstat-no" title="statement not covered" >cssRules=this.map.toCompiledNodes(this._sassRule.blockStart).map(blockStart=&gt;<span class="cstat-no" title="statement not covered" >blockStart.parent)</span>;}</span></span>
<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;cssRules.length;++i){<span class="cstat-no" title="statement not covered" >var cssRule=cssRules[i];<span class="cstat-no" title="statement not covered" >v</span>ar afterCSSProperty=afterCSSProperties.length?afterCSSProperties[i]:null;<span class="cstat-no" title="statement not covered" >v</span>ar newCSSProperties=cssRule.insertProperties(afterCSSProperty,this._nameTexts,this._valueTexts,this._disabledStates);<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;newCSSProperties.length;++j){<span class="cstat-no" title="statement not covered" >this.map.addMapping(newCSSProperties[j].name,newSASSProperties[j].name);<span class="cstat-no" title="statement not covered" >t</span>his.map.addMapping(newCSSProperties[j].value,newSASSProperties[j].value);}</span>}</span></span>
<span class="cstat-no" title="statement not covered" >return cssRules;}</span>,rebase:<span class="fstat-no" title="function not covered" >function(newMap,nodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >var sassRule=(nodeMapping.get(this._sassRule))||this._sassRule;<span class="cstat-no" title="statement not covered" >v</span>ar afterSASSProperty=this._afterSASSProperty?(nodeMapping.get(this._afterSASSProperty))||this._afterSASSProperty:null;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SASSProcessor.InsertPropertiesOperation(newMap,sassRule,afterSASSProperty,this._nameTexts,this._valueTexts,this._disabledStates);}</span>,__proto__:WebInspector.SASSProcessor.EditOperation.prototype};<span class="cstat-no" title="statement not covered" >WebInspector.ASTSourceMap=<span class="fstat-no" title="function not covered" >function(compiledURL,sourceMapURL,models,editCallback)</span></span>
{<span class="cstat-no" title="statement not covered" >this._editCallback=editCallback;<span class="cstat-no" title="statement not covered" >t</span>his._compiledURL=compiledURL;<span class="cstat-no" title="statement not covered" >t</span>his._sourceMapURL=sourceMapURL;<span class="cstat-no" title="statement not covered" >t</span>his._models=models;<span class="cstat-no" title="statement not covered" >t</span>his._compiledToSource=new Map();<span class="cstat-no" title="statement not covered" >t</span>his._sourceToCompiled=new Multimap();}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.ASTSourceMap.prototype={compiledURL:<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >return this._compiledURL;}</span>,url:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return this._sourceMapURL;}</span>,sourceURLs:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return this._models.keysArray().filter(url=&gt;<span class="cstat-no" title="statement not covered" >url!==this._compiledURL)</span>;}</span>,sourceContentProvider:<span class="fstat-no" title="function not covered" >function(sourceURL,contentType)</span>
{<span class="cstat-no" title="statement not covered" >var model=this.modelForURL(sourceURL);<span class="cstat-no" title="statement not covered" >v</span>ar sourceContent=model?model.document.text.value():"";<span class="cstat-no" title="statement not covered" >r</span>eturn WebInspector.StaticContentProvider.fromString(sourceURL,contentType,sourceContent);}</span>,findEntry:<span class="fstat-no" title="function not covered" >function(lineNumber,columnNumber)</span>
{<span class="cstat-no" title="statement not covered" >columnNumber=columnNumber||0;<span class="cstat-no" title="statement not covered" >v</span>ar compiledNode=this.compiledModel().findNodeForPosition(lineNumber,columnNumber);<span class="cstat-no" title="statement not covered" >i</span>f(!compiledNode)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >v</span>ar sourceNode=this.toSourceNode(compiledNode);<span class="cstat-no" title="statement not covered" >i</span>f(!sourceNode)</span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >r</span>eturn new WebInspector.SourceMapEntry(lineNumber,columnNumber,sourceNode.document.url,sourceNode.range.startLine,sourceNode.range.startColumn);}</span>,editable:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return!!this._editCallback;}</span>,editCompiled:<span class="fstat-no" title="function not covered" >function(ranges,texts)</span>
{<span class="cstat-no" title="statement not covered" >return this._editCallback.call(null,this,ranges,texts);}</span>,compiledModel:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return(this._models.get(this._compiledURL));}</span>,sourceModels:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >var sourceModels=(new Map(this._models));<span class="cstat-no" title="statement not covered" >s</span>ourceModels.delete(this._compiledURL);<span class="cstat-no" title="statement not covered" >r</span>eturn sourceModels;}</span>,models:<span class="fstat-no" title="function not covered" >function()</span>
{<span class="cstat-no" title="statement not covered" >return(new Map(this._models));}</span>,modelForURL:<span class="fstat-no" title="function not covered" >function(url)</span>
{<span class="cstat-no" title="statement not covered" >return this._models.get(url)||null;}</span>,addMapping:<span class="fstat-no" title="function not covered" >function(compiled,source)</span>
{<span class="cstat-no" title="statement not covered" >this._compiledToSource.set(compiled,source);<span class="cstat-no" title="statement not covered" >t</span>his._sourceToCompiled.set(source,compiled);}</span>,removeMapping:<span class="fstat-no" title="function not covered" >function(compiled,source)</span>
{<span class="cstat-no" title="statement not covered" >this._compiledToSource.delete(compiled);<span class="cstat-no" title="statement not covered" >t</span>his._sourceToCompiled.remove(source,compiled);}</span>,toSourceNode:<span class="fstat-no" title="function not covered" >function(compiled)</span>
{<span class="cstat-no" title="statement not covered" >return this._compiledToSource.get(compiled)||null;}</span>,toCompiledNodes:<span class="fstat-no" title="function not covered" >function(source)</span>
{<span class="cstat-no" title="statement not covered" >var compiledNodes=this._sourceToCompiled.get(source);<span class="cstat-no" title="statement not covered" >r</span>eturn compiledNodes?compiledNodes.valuesArray():[];}</span>,rebase:<span class="fstat-no" title="function not covered" >function(updated,outNodeMapping)</span>
{<span class="cstat-no" title="statement not covered" >outNodeMapping=outNodeMapping||new Map();<span class="cstat-no" title="statement not covered" >o</span>utNodeMapping.clear();<span class="cstat-no" title="statement not covered" >v</span>ar models=(new Map(this._models));<span class="cstat-no" title="statement not covered" >f</span>or(var newAST of updated){<span class="cstat-no" title="statement not covered" >var oldAST=models.get(newAST.document.url);<span class="cstat-no" title="statement not covered" >i</span>f(!oldAST.match(newAST,outNodeMapping))</span></span>
<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >m</span>odels.set(newAST.document.url,newAST);}</span>
<span class="cstat-no" title="statement not covered" >var newMap=new WebInspector.ASTSourceMap(this._compiledURL,this._sourceMapURL,models,this._editCallback);<span class="cstat-no" title="statement not covered" >v</span>ar compiledNodes=this._compiledToSource.keysArray();<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;compiledNodes.length;++i){<span class="cstat-no" title="statement not covered" >var compiledNode=compiledNodes[i];<span class="cstat-no" title="statement not covered" >v</span>ar sourceNode=(this._compiledToSource.get(compiledNode));<span class="cstat-no" title="statement not covered" >v</span>ar mappedCompiledNode=(outNodeMapping.get(compiledNode)||compiledNode);<span class="cstat-no" title="statement not covered" >v</span>ar mappedSourceNode=(outNodeMapping.get(sourceNode)||sourceNode);<span class="cstat-no" title="statement not covered" >n</span>ewMap.addMapping(mappedCompiledNode,mappedSourceNode);}</span></span>
<span class="cstat-no" title="statement not covered" >return newMap;}</span>};<span class="cstat-no" title="statement not covered" >WebInspector.SASSSourceMapFactory=<span class="fstat-no" title="function not covered" >function()</span></span>
{<span class="cstat-no" title="statement not covered" >this._astService=new WebInspector.ASTService();}</span>
<span class="cstat-no" title="statement not covered" >WebInspector.SASSSourceMapFactory.prototype={editableSourceMap:<span class="fstat-no" title="function not covered" >function(target,sourceMap)</span></span>
{<span class="cstat-no" title="statement not covered" >var cssModel=WebInspector.CSSModel.fromTarget(target);<span class="cstat-no" title="statement not covered" >i</span>f(!cssModel)</span>
<span class="cstat-no" title="statement not covered" >return Promise.resolve((null));<span class="cstat-no" title="statement not covered" >v</span>ar header=cssModel.styleSheetHeaders().find(styleSheetHeader=&gt;<span class="cstat-no" title="statement not covered" >styleSheetHeader.sourceMapURL===sourceMap.url())</span>;<span class="cstat-no" title="statement not covered" >i</span>f(!header)</span>
<span class="cstat-no" title="statement not covered" >return Promise.resolve((null));<span class="cstat-no" title="statement not covered" >v</span>ar models=new Map();<span class="cstat-no" title="statement not covered" >v</span>ar promises=[];<span class="cstat-no" title="statement not covered" >f</span>or(let url of sourceMap.sourceURLs()){<span class="cstat-no" title="statement not covered" >var contentProvider=sourceMap.sourceContentProvider(url,WebInspector.resourceTypes.SourceMapStyleSheet);<span class="cstat-no" title="statement not covered" >v</span>ar sassPromise=contentProvider.requestContent().then(text=&gt;<span class="cstat-no" title="statement not covered" >this._astService.parseSCSS(url,text||""))</span>.then(ast=&gt;<span class="cstat-no" title="statement not covered" >models.set(ast.document.url,ast))</span>;<span class="cstat-no" title="statement not covered" >p</span>romises.push(sassPromise);}</span></span>
<span class="cstat-no" title="statement not covered" >var cssURL=sourceMap.compiledURL();<span class="cstat-no" title="statement not covered" >v</span>ar cssPromise=header.originalContentProvider().requestContent().then(text=&gt;<span class="cstat-no" title="statement not covered" >this._astService.parseCSS(cssURL,text||""))</span>.then(ast=&gt;<span class="cstat-no" title="statement not covered" >models.set(ast.document.url,ast))</span>;<span class="cstat-no" title="statement not covered" >p</span>romises.push(cssPromise);<span class="cstat-no" title="statement not covered" >r</span>eturn Promise.all(promises).then(this._onSourcesParsed.bind(this,sourceMap,models)).catchException((null));}</span>,_onSourcesParsed:<span class="fstat-no" title="function not covered" >function(sourceMap,models)</span>
{<span class="cstat-no" title="statement not covered" >var editCallback=WebInspector.SASSProcessor.processCSSEdits.bind(WebInspector.SASSProcessor,this._astService);<span class="cstat-no" title="statement not covered" >v</span>ar map=new WebInspector.ASTSourceMap(sourceMap.compiledURL(),sourceMap.url(),models,editCallback);<span class="cstat-no" title="statement not covered" >v</span>ar valid=true;<span class="cstat-no" title="statement not covered" >m</span>ap.compiledModel().visit(onNode);<span class="cstat-no" title="statement not covered" >r</span>eturn valid?map:null;<span class="fstat-no" title="function not covered" >f</span>unction onNode(cssNode)</span>
{<span class="cstat-no" title="statement not covered" >if(!valid)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span>f(!(cssNode instanceof WebInspector.SASSSupport.TextNode))</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span>ar entry=sourceMap.findEntry(cssNode.range.startLine,cssNode.range.startColumn);<span class="cstat-no" title="statement not covered" >i</span>f(!entry||!entry.sourceURL||typeof entry.sourceLineNumber==="undefined"||typeof entry.sourceColumnNumber==="undefined")</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span>ar sassAST=models.get(entry.sourceURL);<span class="cstat-no" title="statement not covered" >i</span>f(!sassAST)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span>ar sassNode=sassAST.findNodeForPosition(entry.sourceLineNumber,entry.sourceColumnNumber);<span class="cstat-no" title="statement not covered" >i</span>f(!sassNode)</span>
<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span>f(cssNode.parent&amp;&amp;(cssNode.parent instanceof WebInspector.SASSSupport.Property)&amp;&amp;cssNode===cssNode.parent.name&amp;&amp;cssNode.text.trim()!==sassNode.text.trim()){<span class="cstat-no" title="statement not covered" >valid=false;<span class="cstat-no" title="statement not covered" >r</span>eportError(cssNode,sassNode);<span class="cstat-no" title="statement not covered" >r</span>eturn;}</span></span>
<span class="cstat-no" title="statement not covered" >map.addMapping(cssNode,sassNode);}</span>
<span class="fstat-no" title="function not covered" >function reportError(cssNode,sassNode)</span>
{<span class="cstat-no" title="statement not covered" >var text=WebInspector.UIString("LiveSASS failed to start: %s",sourceMap.url());<span class="cstat-no" title="statement not covered" >t</span>ext+=WebInspector.UIString("\nSourceMap is misaligned: %s != %s",cssNode.text.trim(),sassNode.text.trim());<span class="cstat-no" title="statement not covered" >t</span>ext+="\ncompiled: "+cssNode.document.url+":"+(cssNode.range.startLine+1)+":"+(cssNode.range.startColumn+1);<span class="cstat-no" title="statement not covered" >t</span>ext+="\nsource: "+sassNode.document.url+":"+(sassNode.range.startLine+1)+":"+(sassNode.range.startColumn+1);<span class="cstat-no" title="statement not covered" >W</span>ebInspector.console.error(text);}</span>},};
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 25 2017 13:15:27 GMT+0000 (UTC)</div>
</div>
</body>
</html>
